<h3>Stock</h3></br>
<button id="store_product">Ajouter un produit</button>
{% for stock in stocks %}
<div id="stock{{ stock.id }}">
    <hr style="text-align:left;margin-left:0">
    {{ stock.stock_product.product_name }} - Quantit√© : <div id="quantity{{ stock.id }}" value="{{ stock.stock_number }}">{{ stock.stock_number }}</div> <button id="remove{{ stock.id }}" value="{{ stock.id }}">Retirer</button></br>
    Date de rappel : {{ stock.stock_notification.notification_date }}
    <script>
        $("#remove{{ stock.id }}").click(function () {
            var stockId = $(this).val();
            var stockQuantity = $("#quantity{{ stock.id }}").html();
            if (parseInt($("#quantity{{ stock.id }}").html()) <= 0) {
                return false;
            }
            $.ajax({
                type: 'GET',
                url: "{% url 'ajax_remove_stock' %}",
                data: {
                    'stock': stockId,
                },
                success: function (data) {
                    $("#quantity{{ stock.id }}").html(parseInt(stockQuantity)-1);
                    if (parseInt($("#quantity{{ stock.id }}").html()) <= 0) {
                        $("#stock{{ stock.id }}").remove();
                    }
                }
            });
        });
    </script>
</div>
{% endfor %}

<script>
    $("#store_product").click(function () {
        $.ajax({
            type: 'GET',
            url: "{% url 'ajax_product' %}",
            success: function (data) {
                $("#stock_list").html("");
                $("#product_list").html(data);
            }
        });
    });
</script>

